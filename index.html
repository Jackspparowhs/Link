<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Drawing Board ‚Äî PirateRuler.com</title>
<link rel="icon" href="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='64' height='64'><rect rx='14' width='64' height='64' fill='%236b7dff'/><text x='50%' y='50%' font-family='Inter,Arial,sans-serif' font-weight='800' font-size='26' text-anchor='middle' alignment-baseline='central' fill='white'>PR</text></svg>">
<style>
:root{
  --bg:#f3f7fb;--card:#fff;--muted:#6b7480;--text:#0b2130;
  --accent-start:#6b7dff;--accent-end:#0bb3ff;
  --shadow:0 6px 18px rgba(0,0,0,.08);
}
html.dark{--bg:#071225;--card:#0a1a2c;--muted:#9aa8c2;--text:#eaf1ff;--accent-start:#5ab3ff;--accent-end:#6b7dff}
html.ocean{--bg:#e8f7fb;--card:#fff;--muted:#4f6b75;--text:#063242;--accent-start:#00c2d1;--accent-end:#2b9fff}
html.sunset{--bg:#fff6f8;--card:#fff;--muted:#7a6b77;--text:#2a1020;--accent-start:#ff7aa2;--accent-end:#ffb86b}
body{margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial;background:var(--bg);color:var(--text);overflow-x:hidden}
.container{max-width:1280px;margin:0 auto;padding:16px}

/* header */
header{display:flex;justify-content:space-between;align-items:center;background:linear-gradient(90deg,rgba(107,125,255,.06),rgba(11,179,255,.02));padding:12px 18px;border-radius:12px;box-shadow:var(--shadow)}
.logo{width:48px;height:48px;border-radius:10px;background:linear-gradient(135deg,var(--accent-start),var(--accent-end));color:#fff;display:flex;align-items:center;justify-content:center;font-weight:900}
.title{font-weight:900;font-size:18px}
.btn{cursor:pointer;border:none;padding:8px 12px;border-radius:999px;font-weight:700}
.btn.theme{background:linear-gradient(90deg,var(--accent-start),var(--accent-end));color:#fff}
.hamb{border-radius:10px;background:var(--card);padding:8px;cursor:pointer}

/* canvas area */
.board-wrap{margin-top:20px;background:var(--card);padding:14px;border-radius:14px;box-shadow:var(--shadow)}
.toolbar{display:flex;flex-wrap:wrap;gap:8px;margin-bottom:10px}
.tool-btn{background:var(--bg);border:1px solid rgba(0,0,0,.05);padding:8px 12px;border-radius:8px;cursor:pointer;font-weight:700}
.tool-btn.active{background:linear-gradient(90deg,var(--accent-start),var(--accent-end));color:#fff}
#canvas{border:1px solid rgba(0,0,0,.1);border-radius:10px;width:100%;max-width:100%;touch-action:none;cursor:crosshair;background:#fff}

/* footer */
footer{text-align:center;margin-top:20px;padding:16px;background:linear-gradient(90deg,rgba(255,255,255,.8),rgba(255,255,255,.9));border-radius:12px;box-shadow:var(--shadow)}
footer .visit{display:inline-block;background:linear-gradient(90deg,#ff7aa2,#6b7dff);color:#fff;font-weight:800;padding:10px 18px;border-radius:999px;text-decoration:none}

/* sidebar */
#sidebar{position:fixed;top:0;right:0;height:100%;width:340px;background:var(--card);box-shadow:-4px 0 20px rgba(0,0,0,.15);padding:16px;transform:translateX(120%);transition:.3s;overflow:auto;z-index:200}
#sidebar.show{transform:translateX(0)}
#sidebar h3{margin-top:0}
.theme-list div{padding:8px;cursor:pointer;border-radius:8px}
.theme-list div:hover{background:var(--bg)}

@media(max-width:600px){
  .title{font-size:16px}
  #canvas{height:70vh}
}
</style>
</head>
<body>
<div class="container">
<header>
  <div style="display:flex;align-items:center;gap:12px">
    <div class="logo">PR</div>
    <div><div class="title">Drawing Board</div><div style="font-size:12px;color:var(--muted)">by PirateRuler.com</div></div>
  </div>
  <div style="display:flex;align-items:center;gap:8px">
    <button class="btn theme" id="themeBtn">Light ‚ñæ</button>
    <div class="hamb" id="openSidebar">‚ò∞</div>
  </div>
</header>

<div class="board-wrap">
  <div class="toolbar">
    <button class="tool-btn active" data-tool="brush">Brush</button>
    <button class="tool-btn" data-tool="eraser">Eraser</button>
    <button class="tool-btn" data-tool="rect">Rectangle</button>
    <button class="tool-btn" data-tool="circle">Circle</button>
    <button class="tool-btn" data-tool="line">Line</button>
    <button class="tool-btn" data-tool="text">Text</button>
    <input type="color" id="colorPicker" value="#000000" />
    <input type="range" id="sizePicker" min="1" max="50" value="5" />
    <button class="tool-btn" id="undoBtn">‚Ü© Undo</button>
    <button class="tool-btn" id="redoBtn">‚Ü™ Redo</button>
    <button class="tool-btn" id="clearBtn">üßπ Clear</button>
    <button class="tool-btn" id="saveBtn">üíæ Save</button>
    <button class="tool-btn" id="fullscreenBtn">‚õ∂ Fullscreen</button>
    <input type="file" id="uploadImage" accept="image/*" hidden />
    <button class="tool-btn" id="uploadBtn">üñºÔ∏è Upload</button>
  </div>
  <canvas id="canvas" width="1200" height="600"></canvas>
</div>

<footer>
  <a href="https://pirateruler.com" target="_blank" rel="noopener noreferrer" class="visit">Visit PirateRuler.com</a>
  <div style="margin-top:6px;color:var(--muted);font-size:13px">¬© <span id="year"></span> PirateRuler</div>
</footer>

<aside id="sidebar">
  <div style="display:flex;justify-content:flex-end"><button id="closeSidebar" class="btn">Close</button></div>
  <h3>Themes</h3>
  <div class="theme-list">
    <div data-theme="light">Light</div>
    <div data-theme="dark">Dark</div>
    <div data-theme="ocean">Ocean</div>
    <div data-theme="sunset">Sunset</div>
  </div>
  <hr />
  <h3>How to Use</h3>
  <p>üé® Select a tool from above ‚Äî Brush, Shape, Text, or Upload Image.</p>
  <p>üñåÔ∏è Use color and size controls for customization.</p>
  <p>üì± Works on phone (use finger or stylus).</p>
  <p>üíæ Save drawings locally, no data leaves your device.</p>
</aside>
</div>
<script>
  // Drawing Board Script ‚Äî PirateRuler.com
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");
const colorPicker = document.getElementById("colorPicker");
const sizePicker = document.getElementById("sizePicker");
const undoBtn = document.getElementById("undoBtn");
const redoBtn = document.getElementById("redoBtn");
const clearBtn = document.getElementById("clearBtn");
const saveBtn = document.getElementById("saveBtn");
const fullscreenBtn = document.getElementById("fullscreenBtn");
const uploadBtn = document.getElementById("uploadBtn");
const uploadImage = document.getElementById("uploadImage");

let drawing = false;
let tool = "brush";
let startX, startY;
let undoStack = [], redoStack = [];

// Save current state
function saveState() {
  undoStack.push(canvas.toDataURL());
  redoStack = [];
}

// Restore from state
function restoreState(imgData) {
  const img = new Image();
  img.src = imgData;
  img.onload = () => ctx.drawImage(img, 0, 0);
}

// Draw start
canvas.addEventListener("mousedown", startDrawing);
canvas.addEventListener("touchstart", startDrawing, { passive: false });
canvas.addEventListener("mousemove", draw);
canvas.addEventListener("touchmove", draw, { passive: false });
canvas.addEventListener("mouseup", stopDrawing);
canvas.addEventListener("mouseleave", stopDrawing);
canvas.addEventListener("touchend", stopDrawing);

function getPos(e) {
  if (e.touches) {
    const rect = canvas.getBoundingClientRect();
    return {
      x: e.touches[0].clientX - rect.left,
      y: e.touches[0].clientY - rect.top
    };
  }
  return { x: e.offsetX, y: e.offsetY };
}

function startDrawing(e) {
  e.preventDefault();
  saveState();
  drawing = true;
  const pos = getPos(e);
  startX = pos.x;
  startY = pos.y;
  if (tool === "brush" || tool === "eraser") {
    ctx.beginPath();
    ctx.moveTo(startX, startY);
  }
}

function draw(e) {
  if (!drawing) return;
  e.preventDefault();
  const pos = getPos(e);
  ctx.lineWidth = sizePicker.value;
  ctx.lineCap = "round";
  ctx.strokeStyle = tool === "eraser" ? "#ffffff" : colorPicker.value;

  if (tool === "brush" || tool === "eraser") {
    ctx.lineTo(pos.x, pos.y);
    ctx.stroke();
  } else {
    // preview shapes
    const snapshot = undoStack[undoStack.length - 1];
    const img = new Image();
    img.src = snapshot;
    img.onload = () => {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      ctx.drawImage(img, 0, 0);
      ctx.strokeStyle = colorPicker.value;
      ctx.lineWidth = sizePicker.value;
      if (tool === "rect") ctx.strokeRect(startX, startY, pos.x - startX, pos.y - startY);
      if (tool === "line") {
        ctx.beginPath();
        ctx.moveTo(startX, startY);
        ctx.lineTo(pos.x, pos.y);
        ctx.stroke();
      }
      if (tool === "circle") {
        ctx.beginPath();
        const radius = Math.sqrt(Math.pow(pos.x - startX, 2) + Math.pow(pos.y - startY, 2));
        ctx.arc(startX, startY, radius, 0, Math.PI * 2);
        ctx.stroke();
      }
    };
  }
}

function stopDrawing(e) {
  if (!drawing) return;
  drawing = false;
  if (tool !== "text") return;
}

// Tool switching
document.querySelectorAll(".tool-btn").forEach(btn => {
  btn.addEventListener("click", () => {
    document.querySelectorAll(".tool-btn").forEach(b => b.classList.remove("active"));
    btn.classList.add("active");
    tool = btn.dataset.tool;
  });
});

// Undo / redo
undoBtn.addEventListener("click", () => {
  if (undoStack.length < 1) return;
  const last = undoStack.pop();
  redoStack.push(canvas.toDataURL());
  restoreState(last);
});

redoBtn.addEventListener("click", () => {
  if (redoStack.length < 1) return;
  const next = redoStack.pop();
  undoStack.push(canvas.toDataURL());
  restoreState(next);
});

// Clear canvas
clearBtn.addEventListener("click", () => {
  if (confirm("Clear entire canvas?")) {
    saveState();
    ctx.clearRect(0, 0, canvas.width, canvas.height);
  }
});

// Save as image
saveBtn.addEventListener("click", () => {
  const link = document.createElement("a");
  link.download = "drawing.png";
  link.href = canvas.toDataURL();
  link.click();
});

// Fullscreen
fullscreenBtn.addEventListener("click", () => {
  if (document.fullscreenElement) document.exitFullscreen();
  else canvas.requestFullscreen();
});

// Upload image
uploadBtn.addEventListener("click", () => uploadImage.click());
uploadImage.addEventListener("change", e => {
  const file = e.target.files[0];
  if (!file) return;
  const img = new Image();
  img.onload = () => ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
  img.src = URL.createObjectURL(file);
});

// Sidebar toggle
document.getElementById("openSidebar").onclick = () => document.getElementById("sidebar").classList.add("show");
document.getElementById("closeSidebar").onclick = () => document.getElementById("sidebar").classList.remove("show");

// Themes
const themeBtn = document.getElementById("themeBtn");
document.querySelectorAll(".theme-list div").forEach(t => {
  t.addEventListener("click", () => applyTheme(t.dataset.theme));
});
function applyTheme(theme) {
  document.documentElement.className = theme === "light" ? "" : theme;
  themeBtn.textContent = theme.charAt(0).toUpperCase() + theme.slice(1) + " ‚ñæ";
  localStorage.setItem("draw-theme", theme);
}
(function initTheme(){
  const saved = localStorage.getItem("draw-theme") || "light";
  applyTheme(saved);
})();
document.getElementById("year").textContent = new Date().getFullYear();
